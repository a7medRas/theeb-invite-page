
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>كود الدعوة - حدث خاص</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      min-height: 100%;
      font-family: 'Cairo', sans-serif;
      background: #fff;
      overflow-x: hidden;
      overflow-y: auto;
    }

    .video-bg {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100%;
      min-height: 100%;
      z-index: -2;
      object-fit: cover;
    }

    .overlay {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: rgba(255, 255, 255, 0.85);
      z-index: -1;
    }

    .main-box {
      background: #ffffffd0;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      max-width: 500px;
      margin: 60px auto;
      text-align: center;
      z-index: 1;
      position: relative;
    }

    input[type="text"], button {
      padding: 12px;
      width: 90%;
      font-size: 18px;
      margin-top: 15px;
      border-radius: 10px;
      border: 1px solid #ccc;
      text-align: center;
    }

    button {
      background-color: #a67c52;
      color: white;
      cursor: pointer;
      width: auto;
      padding: 10px 20px;
      margin-top: 20px;
    }

    #inviteCard {
      margin-top: 30px;
      display: none;
      background-color: #f6f0ea;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }

    #inviteCode {
      font-size: 22px;
      color: #2e7d32;
      margin-bottom: 20px;
      font-weight: bold;
      direction: ltr;
    }

    .share-buttons button {
      margin: 6px 4px;
      padding: 8px 15px;
      background-color: #5e5e5e;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
    }

    .share-buttons button:hover {
      background-color: #444;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    th, td {
      padding: 10px;
      border: 1px solid #ddd;
    }

    th {
      background-color: #a67c52;
      color: white;
    }
  </style>
</head>
<body>

  <video autoplay muted loop class="video-bg">
    <source src="background.mp4" type="video/mp4">
    متصفحك لا يدعم تشغيل الفيديو.
  </video>

  <div class="overlay"></div>

  <div class="main-box">
    <h2>🎉 احصل على كود الدعوة الخاص بك</h2>
    <p style="font-size: 16px; color: #444;">
      هذا الحدث متاح لجميع مذيعين الوكالة. يمكن لكل مذيع الحصول على كود دعوة خاصة به ودعوة أشخاص جدد والحصول على مكافآت تصل إلى 1000$ شهريًا.
      <br><br>
      <strong>شروط الحصول على المكافأة:</strong><br>
      1- أن يجتاز المذيع المدعو مرحلة الأوديشن.<br>
      2- أن يحقق 31 ساعة خلال أول شهر.
    </p>

    <table>
      <thead>
        <tr>
          <th>نوع الدعوة</th>
          <th>المكافأة</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>مذيع من داخل الشرق الأوسط</td>
          <td>2$</td>
        </tr>
        <tr>
          <td>مذيع من دول الخليج</td>
          <td>4$</td>
        </tr>
      </tbody>
    </table>

    <input type="text" id="likeeId" placeholder="مثال: 123456789">
    <br>
    <button onclick="generateCode()">احصل على الكود</button>

    <div id="inviteCard">
      <div id="inviteCode"></div>
      <div class="share-buttons">
        <p id="shareCounter" style="color:#555; font-size:14px;"></p>
        <button onclick="share('whatsapp')">📱 واتساب</button>
        <button onclick="share('messenger')">💬 ماسنجر</button>
        <button onclick="share('likee')">🔥 لايكي</button>
        <button onclick="share('tiktok')">🎵 تيك توك</button>
        <button onclick="share('copy')">📋 نسخ</button>
      </div>
    </div>
  </div>

<script>
function generateCode() {
  const id = document.getElementById("likeeId").value.trim();
  const inviteBox = document.getElementById("inviteCard");
  const codeArea = document.getElementById("inviteCode");

  if (!id) {
    alert("❌ الرجاء إدخال Likee ID صالح.");
    inviteBox.style.display = "none";
    return;
  }

  let randomPart = Math.floor(1000 + Math.random() * 9000);
  let inviteCode = `TH-${id}-${randomPart}`;

  codeArea.innerText = inviteCode;
  inviteBox.style.display = "block";
  inviteBox.style.opacity = "1";
  inviteBox.style.transform = "scale(1)";

  incrementCounter();
  sendToGoogleSheet(id, inviteCode);
}

function sendToGoogleSheet(likeeId, inviteCode) {
  fetch("https://script.google.com/macros/s/AKfycbwtnLPgvBZJ35GlA75TejT4eQVNPQaWRmBD2r4YvRqNCwY91HF3AXiPn4udTANT4zwv/exec", {
    method: "POST",
    body: new URLSearchParams({
      likeeId: likeeId,
      inviteCode: inviteCode
    })
  }).then(response => response.text())
    .then(result => console.log(result))
    .catch(error => console.error("خطأ في الإرسال:", error));
}

let counter = 0;
function incrementCounter() {
  counter++;
  document.getElementById("shareCounter").innerText = `💡 عدد الأكواد التي تم إنشاؤها: ${counter}`;
}

function share(platform) {
  const inviteCode = document.getElementById("inviteCode").innerText;
  const text = `📢 كود الدعوة الخاص بي: ${inviteCode} 
انضم الآن إلى الحدث!`;

  let url = "";
  switch(platform) {
    case "whatsapp":
      url = `https://wa.me/?text=${encodeURIComponent(text)}`;
      break;
    case "messenger":
      url = `fb-messenger://share/?link=${encodeURIComponent(text)}`;
      break;
    case "likee":
      alert("يرجى مشاركة الكود يدويًا داخل تطبيق Likee 🚀");
      return;
    case "tiktok":
      alert("يرجى مشاركة الكود يدويًا داخل TikTok 🎬");
      return;
    case "copy":
      navigator.clipboard.writeText(text).then(() => {
        alert("✅ تم نسخ كود الدعوة!");
      });
      return;
  }

  window.open(url, '_blank');
}
</script>

</body>
</html>
